$(function() {

  // country being null will trigger geopip serverside which overrides all values
  function fetchShipping(country, post_code, county, city, line1) {
    data = {
      country: country,
      county: county,
      city: city,
      post_code: post_code,
      line1: line1
    }
    // use CSRF protection to mitigate abuse of this
    data[$('meta[name=csrf-param]').attr('content')] = $('meta[name=csrf-token]').attr('content')

    $.getJSON("<%= TheManual::Application.routes.url_helpers.shipping_path %>", data, function(data) {

      // TODO update DOM etc here
      console.log(data);
    });
  }

  // expose to the global window object for now!
  window.GetShipping = fetchShipping;
});
